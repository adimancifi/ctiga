(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){a.runMode=function(l,d,g,c){d=a.getMode(a.defaults,d);var p=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||9>document.documentMode);if(g.appendChild){var n=c&&c.tabSize||a.defaults.tabSize,m=g,h=0;m.innerHTML="";g=function(a,c){if("\n"==a)m.appendChild(document.createTextNode(p?"\r":a)),h=0;else{for(var b="",e=0;;){var f=a.indexOf("\t",e);if(-1==f){b+=a.slice(e);h+=a.length-e;break}else{h+=f-e;b+=a.slice(e,f);e=n-h%n;h+=e;for(var d=0;d<e;++d)b+=" ";e=f+1}}c?(f=m.appendChild(document.createElement("span")),f.className="cm-"+c.replace(/ +/g," cm-"),f.appendChild(document.createTextNode(b))):m.appendChild(document.createTextNode(b))}}}l=a.splitLines(l);c=c&&c.state||a.startState(d);for(var k=0,q=l.length;k<q;++k){k&&g("\n");var b=new a.StringStream(l[k]);for(!b.string&&d.blankLine&&d.blankLine(c);!b.eol();){var r=d.token(b,c);g(b.current(),r,k,b.start,c);b.start=b.pos}}}});